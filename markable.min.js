/**
 * markable - make non-English Markdown plain text markable
 * Copyright (c) 2020, Guxi11. (MIT Licensed)
 * https://github.com/hbhde/markable
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).markable=t()}(this,function(){"use strict";var s=/(^|[^\[])\^/g;var r={"=`=":/·/,"=~=":/～/,"={=":/「/,"=}=":/」/,"=<=":/《〈/,"=>=":/》〉/,"=:=":/：/,"=!=":/！/,"=_=":/——/,"=$=":/¥/,'="=':/“”/,"='=":/‘’/,"=\\\\\\[=":/【/,"=\\\\\\]=":/】/,"=\\\\\\(=":/（/,"=\\\\\\)=":/）/,"=\\\\\\|=":/｜/,"=\\\\\\.=":/。/},n=function(l){l=l.source||l;var a={replace:function(e,t){return t=(t=t.source||t).replace(s,"$1"),l=l.replace(e,t),a},replaceAllByDict:function(e){for(var t in e){var r=t,n=e[t];n=(n=n.source||n).replace(s,"$1"),l=l.replace(RegExp(r,"g"),n)}return a},getRegex:function(){return new RegExp(l)}};return a},e={newline:/^\n+/,fences:/^ {0,3}([=`=]{3,}(?=[^\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[=`=]* *(?:\n+|$)|$)/,blockquote:/^( {0,3}[=>=] ?(paragraph|[^\n]*)(?:\n|$))+/,_paragraph:/^([^\n]+(?:\n(?!blockquote)[^\n]+)*)/,text:/^[^\n]+/};e.paragraph=n(e._paragraph).replace("blockquote"," {0,3}>").getRegex(),e.blockquote=n(e.blockquote).replace("paragraph",e.paragraph).getRegex();var t={link:/^!?[=\[=](label)[=\]=][=\(=]\s*(href)(?:\s+(title))?\s*[=\)=]/,reflink:/^!?[=\[=](label)[=\]=][=\[=](?!\s*[=\]=])((?:\\[=\[==\]=]?|[^=\[==\]=\\])+)[=\]=]/,nolink:/^!?[=\[=](?!\s*[=\]=])((?:[=\[=][^=\[==\]=]*[=\]=]|\\[=\[==\]=]|[^=\[==\]=])*)[=\]=](?:[=\[=][=\]=])?/,code:/^([=`=]+)([^=`=]|[^=`=][\s\S]*?[^=`=])\1(?![=`=])/,text:/^([=`=]+|[^=`=])(?:[\s\S]*?(?:(?=[\\<!=\[==`=*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_label:/(?:[=\[=][^=\[==\]=]*[=\]=]|\\.|[=`=][^=`=]*[=`=]|[^=\[==\]=\\=`=])*?/,_href:/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,_title:/[="=](?:\\[="=]?|[^="=\\])*[="=]|[='=](?:\\[='=]?|[^='=\\])*[='=]|[=\(=](?:\\[=\)=]?|[^)\\])*[=\)=]/};t.link=n(t.link).replace("label",t._label).replace("href",t._href).replace("title",t._title).getRegex(),t.reflink=n(t.reflink).replace("label",t._label).getRegex(),[e,t].map(function(e){for(var t in e)e[t]=n(e[t]).replaceAllByDict(r).getRegex()});var l={block:e,inline:t},a=l.inline,i=function(){function t(){this.rules=a,this.dest=""}return t.translate=function(e){return(new t).translate(e)},t.prototype.translate=function(e){for(var t;e;)(t=this.rules.link.exec(e))?(e=e.substring(t[0].length),this.dest+=t[0].replace(/！/,"!").replace(/【/,"[").replace(/】/,"]").replace(/（/,"(").replace(/）/,")").replace(/[“”]/g,'"')):(t=this.rules.code.exec(e))?(e=e.substring(t[0].length),this.dest+=t[0].replace(/·/g,"`")):(t=this.rules.text.exec(e))&&(e=e.substring(t[0].length),this.dest+=t[0]);return this.dest},t}(),c=l.block,o=function(){function t(){this.rules=c,this.dest="",this.inlineTranslator=new i}return t.translate=function(e){return(new t).translate(e)},t.prototype.translate=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ");e;)(t=this.rules.newline.exec(e))&&(e=e.substring(t[0].length),this.dest+=t[0]),(t=this.rules.fences.exec(e))&&(e=e.substring(t[0].length),this.dest+=t[0].replace(/[·]{3}/g,"```")),(t=this.rules.blockquote.exec(e))&&(e=e.substring(t[0].length),this.dest+=this.inlineTranslator.translate(t[0]).replace(/[》〉]/g,">")),(t=this.rules.text.exec(e))&&(e=e.substring(t[0].length),this.dest+=this.inlineTranslator.translate(t[0]));return this.dest},t}();return function(e){if(null==e)throw new Error("markable(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("markable(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");return o.translate(e)}});